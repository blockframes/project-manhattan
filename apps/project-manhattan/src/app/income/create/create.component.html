<ng-container *transloco="let t; read: 'income.create'">
  <form fxLayout fxLayoutAlign="center center" fxLayoutGap="16px" [formGroup]="ticketForm">
    <mat-form-field>
      <mat-label>{{ t('ticket.amount.label') }}</mat-label>
      <input matInput formControlName="amount" name="amount" type="number" />
    </mat-form-field>
    <mat-form-field>
      <mat-label>{{ t('ticket.price.label') }}</mat-label>
      <input matInput formControlName="price" name="price" type="number" />
      <span matSuffix>â‚¬</span>
    </mat-form-field>

    <button mat-button (click)="emulate()">{{ t('ticket.submit') }}</button>
  </form>


  <section *ngIf="!isLoading; else loading">
    <ng-container *ngIf="summary">
      <article @slideUpList fxLayout="column" fxLayoutGap="16px" class="summary">
        <h2 class="up">Summary</h2>
        <h3 class="up">Total: {{ summary.title.total | translocoCurrency }}</h3>
        <mat-chip-list class="up">
          <ng-container *ngFor="let income of incomes">
            <mat-chip>{{ income.termsId }} - {{ income.amount | translocoCurrency }}</mat-chip>
          </ng-container>
        </mat-chip-list>
        <table class="up" mat-table [dataSource]="summary.orgs | keyvalue">
          <!-- Column -->
          <ng-container *ngFor="let column of columns">
            <!-- Name -->
            <ng-container *ngIf="column === 'name'" [matColumnDef]="column">
              <th mat-header-cell *matHeaderCellDef> {{ column }} </th>
              <td mat-cell *matCellDef="let org"> {{ org.key }} </td>
            </ng-container>
            <!-- Terms -->
            <ng-container *ngIf="column !== 'name'" [matColumnDef]="column">
              <th mat-header-cell *matHeaderCellDef> {{ column }} </th>
              <td mat-cell *matCellDef="let org"> {{org.value[column] | translocoCurrency }} </td>
            </ng-container>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="columns"></tr>
          <tr mat-row *matRowDef="let row; columns: columns;"></tr>
        </table>
      </article>
    </ng-container>
  </section>
  <ng-template #loading>
    <div class="loading" @slideDown fxLayout fxLayoutAlign="center center">
      We are running the calculation, it will take less than a minute
    </div>
  </ng-template>
</ng-container>